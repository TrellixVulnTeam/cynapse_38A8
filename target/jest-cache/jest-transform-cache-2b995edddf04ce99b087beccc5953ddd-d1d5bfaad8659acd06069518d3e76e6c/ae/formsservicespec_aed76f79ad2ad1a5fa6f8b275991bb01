62a055ac74177159aa4d35702734549e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/core/testing");
const testing_2 = require("@angular/common/http/testing");
const dayjs = require("dayjs");
const input_constants_1 = require("app/config/input.constants");
const forms_model_1 = require("../forms.model");
const forms_service_1 = require("./forms.service");
describe('Service Tests', () => {
    describe('Forms Service', () => {
        let service;
        let httpMock;
        let elemDefault;
        let expectedResult;
        let currentDate;
        beforeEach(() => {
            testing_1.TestBed.configureTestingModule({
                imports: [testing_2.HttpClientTestingModule],
            });
            expectedResult = null;
            service = testing_1.TestBed.inject(forms_service_1.FormsService);
            httpMock = testing_1.TestBed.inject(testing_2.HttpTestingController);
            currentDate = dayjs();
            elemDefault = {
                id: 0,
                name: 'AAAAAAA',
                cynapseId: 'AAAAAAA',
                emailId: 'AAAAAAA',
                phoneNumber: 'AAAAAAA',
                createdDate: currentDate,
                referalCode: 'AAAAAAA',
                formDocumentContentType: 'image/png',
                formDocument: 'AAAAAAA',
            };
        });
        describe('Service methods', () => {
            it('should find an element', () => {
                const returnedFromService = Object.assign({
                    createdDate: currentDate.format(input_constants_1.DATE_FORMAT),
                }, elemDefault);
                service.find(123).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'GET' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(elemDefault);
            });
            it('should create a Forms', () => {
                const returnedFromService = Object.assign({
                    id: 0,
                    createdDate: currentDate.format(input_constants_1.DATE_FORMAT),
                }, elemDefault);
                const expected = Object.assign({
                    createdDate: currentDate,
                }, returnedFromService);
                service.create(new forms_model_1.Forms()).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'POST' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(expected);
            });
            it('should update a Forms', () => {
                const returnedFromService = Object.assign({
                    id: 1,
                    name: 'BBBBBB',
                    cynapseId: 'BBBBBB',
                    emailId: 'BBBBBB',
                    phoneNumber: 'BBBBBB',
                    createdDate: currentDate.format(input_constants_1.DATE_FORMAT),
                    referalCode: 'BBBBBB',
                    formDocument: 'BBBBBB',
                }, elemDefault);
                const expected = Object.assign({
                    createdDate: currentDate,
                }, returnedFromService);
                service.update(expected).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'PUT' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(expected);
            });
            it('should partial update a Forms', () => {
                const patchObject = Object.assign({
                    name: 'BBBBBB',
                    cynapseId: 'BBBBBB',
                    emailId: 'BBBBBB',
                    phoneNumber: 'BBBBBB',
                    createdDate: currentDate.format(input_constants_1.DATE_FORMAT),
                }, new forms_model_1.Forms());
                const returnedFromService = Object.assign(patchObject, elemDefault);
                const expected = Object.assign({
                    createdDate: currentDate,
                }, returnedFromService);
                service.partialUpdate(patchObject).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'PATCH' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(expected);
            });
            it('should return a list of Forms', () => {
                const returnedFromService = Object.assign({
                    id: 1,
                    name: 'BBBBBB',
                    cynapseId: 'BBBBBB',
                    emailId: 'BBBBBB',
                    phoneNumber: 'BBBBBB',
                    createdDate: currentDate.format(input_constants_1.DATE_FORMAT),
                    referalCode: 'BBBBBB',
                    formDocument: 'BBBBBB',
                }, elemDefault);
                const expected = Object.assign({
                    createdDate: currentDate,
                }, returnedFromService);
                service.query().subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'GET' });
                req.flush([returnedFromService]);
                httpMock.verify();
                expect(expectedResult).toContainEqual(expected);
            });
            it('should delete a Forms', () => {
                service.delete(123).subscribe(resp => (expectedResult = resp.ok));
                const req = httpMock.expectOne({ method: 'DELETE' });
                req.flush({ status: 200 });
                expect(expectedResult);
            });
            describe('addFormsToCollectionIfMissing', () => {
                it('should add a Forms to an empty array', () => {
                    const forms = { id: 123 };
                    expectedResult = service.addFormsToCollectionIfMissing([], forms);
                    expect(expectedResult).toHaveLength(1);
                    expect(expectedResult).toContain(forms);
                });
                it('should not add a Forms to an array that contains it', () => {
                    const forms = { id: 123 };
                    const formsCollection = [
                        Object.assign({}, forms),
                        { id: 456 },
                    ];
                    expectedResult = service.addFormsToCollectionIfMissing(formsCollection, forms);
                    expect(expectedResult).toHaveLength(2);
                });
                it("should add a Forms to an array that doesn't contain it", () => {
                    const forms = { id: 123 };
                    const formsCollection = [{ id: 456 }];
                    expectedResult = service.addFormsToCollectionIfMissing(formsCollection, forms);
                    expect(expectedResult).toHaveLength(2);
                    expect(expectedResult).toContain(forms);
                });
                it('should add only unique Forms to an array', () => {
                    const formsArray = [{ id: 123 }, { id: 456 }, { id: 5237 }];
                    const formsCollection = [{ id: 123 }];
                    expectedResult = service.addFormsToCollectionIfMissing(formsCollection, ...formsArray);
                    expect(expectedResult).toHaveLength(3);
                });
                it('should accept varargs', () => {
                    const forms = { id: 123 };
                    const forms2 = { id: 456 };
                    expectedResult = service.addFormsToCollectionIfMissing([], forms, forms2);
                    expect(expectedResult).toHaveLength(2);
                    expect(expectedResult).toContain(forms);
                    expect(expectedResult).toContain(forms2);
                });
                it('should accept null and undefined values', () => {
                    const forms = { id: 123 };
                    expectedResult = service.addFormsToCollectionIfMissing([], null, forms, undefined);
                    expect(expectedResult).toHaveLength(1);
                    expect(expectedResult).toContain(forms);
                });
            });
        });
        afterEach(() => {
            httpMock.verify();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva2FydGhpay9jeW5hcHNlVGVjaC9zcmMvbWFpbi93ZWJhcHAvYXBwL2VudGl0aWVzL2Zvcm1zL3NlcnZpY2UvZm9ybXMuc2VydmljZS5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsbURBQWdEO0FBQ2hELDBEQUE4RjtBQUM5RiwrQkFBK0I7QUFFL0IsZ0VBQXlEO0FBQ3pELGdEQUErQztBQUUvQyxtREFBK0M7QUFFL0MsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDN0IsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDN0IsSUFBSSxPQUFxQixDQUFDO1FBQzFCLElBQUksUUFBK0IsQ0FBQztRQUNwQyxJQUFJLFdBQW1CLENBQUM7UUFDeEIsSUFBSSxjQUFrRCxDQUFDO1FBQ3ZELElBQUksV0FBd0IsQ0FBQztRQUU3QixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsaUJBQU8sQ0FBQyxzQkFBc0IsQ0FBQztnQkFDN0IsT0FBTyxFQUFFLENBQUMsaUNBQXVCLENBQUM7YUFDbkMsQ0FBQyxDQUFDO1lBQ0gsY0FBYyxHQUFHLElBQUksQ0FBQztZQUN0QixPQUFPLEdBQUcsaUJBQU8sQ0FBQyxNQUFNLENBQUMsNEJBQVksQ0FBQyxDQUFDO1lBQ3ZDLFFBQVEsR0FBRyxpQkFBTyxDQUFDLE1BQU0sQ0FBQywrQkFBcUIsQ0FBQyxDQUFDO1lBQ2pELFdBQVcsR0FBRyxLQUFLLEVBQUUsQ0FBQztZQUV0QixXQUFXLEdBQUc7Z0JBQ1osRUFBRSxFQUFFLENBQUM7Z0JBQ0wsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsU0FBUyxFQUFFLFNBQVM7Z0JBQ3BCLE9BQU8sRUFBRSxTQUFTO2dCQUNsQixXQUFXLEVBQUUsU0FBUztnQkFDdEIsV0FBVyxFQUFFLFdBQVc7Z0JBQ3hCLFdBQVcsRUFBRSxTQUFTO2dCQUN0Qix1QkFBdUIsRUFBRSxXQUFXO2dCQUNwQyxZQUFZLEVBQUUsU0FBUzthQUN4QixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxRQUFRLENBQUMs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SCxFQUFFLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO29CQUNqRCxNQUFNLEtBQUssR0FBVyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQztvQkFDbEMsY0FBYyxHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztvQkFDbkYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDdkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDMUMsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtZQUNiLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNwQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUva2FydGhpay9jeW5hcHNlVGVjaC9zcmMvbWFpbi93ZWJhcHAvYXBwL2VudGl0aWVzL2Zvcm1zL3NlcnZpY2UvZm9ybXMuc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3RCZWQgfSBmcm9tICdAYW5ndWxhci9jb3JlL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSHR0cENsaWVudFRlc3RpbmdNb2R1bGUsIEh0dHBUZXN0aW5nQ29udHJvbGxlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwL3Rlc3RpbmcnO1xuaW1wb3J0ICogYXMgZGF5anMgZnJvbSAnZGF5anMnO1xuXG5pbXBvcnQgeyBEQVRFX0ZPUk1BVCB9IGZyb20gJ2FwcC9jb25maWcvaW5wdXQuY29uc3RhbnRzJztcbmltcG9ydCB7IElGb3JtcywgRm9ybXMgfSBmcm9tICcuLi9mb3Jtcy5tb2RlbCc7XG5cbmltcG9ydCB7IEZvcm1zU2VydmljZSB9IGZyb20gJy4vZm9ybXMuc2VydmljZSc7XG5cbmRlc2NyaWJlKCdTZXJ2aWNlIFRlc3RzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnRm9ybXMgU2VydmljZScsICgpID0+IHtcbiAgICBsZXQgc2VydmljZTogRm9ybXNTZXJ2aWNlO1xuICAgIGxldCBodHRwTW9jazogSHR0cFRlc3RpbmdDb250cm9sbGVyO1xuICAgIGxldCBlbGVtRGVmYXVsdDogSUZvcm1zO1xuICAgIGxldCBleHBlY3RlZFJlc3VsdDogSUZvcm1zIHwgSUZvcm1zW10gfCBib29sZWFuIHwgbnVsbDtcbiAgICBsZXQgY3VycmVudERhdGU6IGRheWpzLkRheWpzO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgICBpbXBvcnRzOiBbSHR0cENsaWVudFRlc3RpbmdNb2R1bGVdLFxuICAgICAgfSk7XG4gICAgICBleHBlY3RlZFJlc3VsdCA9IG51bGw7XG4gICAgICBzZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoRm9ybXNTZXJ2aWNlKTtcbiAgICAgIGh0dHBNb2NrID0gVGVzdEJlZC5pbmplY3QoSHR0cFRlc3RpbmdDb250cm9sbGVyKTtcbiAgICAgIGN1cnJlbnREYXRlID0gZGF5anMoKTtcblxuICAgICAgZWxlbURlZmF1bHQgPSB7XG4gICAgICAgIGlkOiAwLFxuICAgICAgICBuYW1lOiAnQUFBQUFBQScsXG4gICAgICAgIGN5bmFwc2VJZDogJ0FBQUFBQUEnLFxuICAgICAgICBlbWFpbElkOiAnQUFBQUFBQScsXG4gICAgICAgIHBob25lTnVtYmVyOiAnQUFBQUFBQScsXG4gICAgICAgIGNyZWF0ZWREYXRlOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgcmVmZXJhbENvZGU6ICdBQUFBQUFBJyxcbiAgICAgICAgZm9ybURvY3VtZW50Q29udGVudFR5cGU6ICdpbWFnZS9wbmcnLFxuICAgICAgICBmb3JtRG9jdW1lbnQ6ICdBQUFBQUFBJyxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnU2VydmljZSBtZXRob2RzJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBmaW5kIGFuIGVsZW1lbnQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJldHVybmVkRnJvbVNlcnZpY2UgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNyZWF0ZWREYXRlOiBjdXJyZW50RGF0ZS5mb3JtYXQoREFURV9GT1JNQVQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWxlbURlZmF1bHRcbiAgICAgICAgKTtcblxuICAgICAgICBzZXJ2aWNlLmZpbmQoMTIzKS5zdWJzY3JpYmUocmVzcCA9PiAoZXhwZWN0ZWRSZXN1bHQgPSByZXNwLmJvZHkpKTtcblxuICAgICAgICBjb25zdCByZXEgPSBodHRwTW9jay5leHBlY3RPbmUoeyBtZXRob2Q6ICdHRVQnIH0pO1xuICAgICAgICByZXEuZmx1c2gocmV0dXJuZWRGcm9tU2VydmljZSk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9NYXRjaE9iamVjdChlbGVtRGVmYXVsdCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBGb3JtcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgcmV0dXJuZWRGcm9tU2VydmljZSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgICBjcmVhdGVkRGF0ZTogY3VycmVudERhdGUuZm9ybWF0KERBVEVfRk9STUFUKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVsZW1EZWZhdWx0XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNyZWF0ZWREYXRlOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJldHVybmVkRnJvbVNlcnZpY2VcbiAgICAgICAgKTtcblxuICAgICAgICBzZXJ2aWNlLmNyZWF0ZShuZXcgRm9ybXMoKSkuc3Vic2NyaWJlKHJlc3AgPT4gKGV4cGVjdGVkUmVzdWx0ID0gcmVzcC5ib2R5KSk7XG5cbiAgICAgICAgY29uc3QgcmVxID0gaHR0cE1vY2suZXhwZWN0T25lKHsgbWV0aG9kOiAnUE9TVCcgfSk7XG4gICAgICAgIHJlcS5mbHVzaChyZXR1cm5lZEZyb21TZXJ2aWNlKTtcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b01hdGNoT2JqZWN0KGV4cGVjdGVkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBhIEZvcm1zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXR1cm5lZEZyb21TZXJ2aWNlID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIG5hbWU6ICdCQkJCQkInLFxuICAgICAgICAgICAgY3luYXBzZUlkOiAnQkJCQkJCJyxcbiAgICAgICAgICAgIGVtYWlsSWQ6ICdCQkJCQkInLFxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6ICdCQkJCQkInLFxuICAgICAgICAgICAgY3JlYXRlZERhdGU6IGN1cnJlbnREYXRlLmZvcm1hdChEQVRFX0ZPUk1BVCksXG4gICAgICAgICAgICByZWZlcmFsQ29kZTogJ0JCQkJCQicsXG4gICAgICAgICAgICBmb3JtRG9jdW1lbnQ6ICdCQkJCQkInLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWxlbURlZmF1bHRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBleHBlY3RlZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgY3JlYXRlZERhdGU6IGN1cnJlbnREYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmV0dXJuZWRGcm9tU2VydmljZVxuICAgICAgICApO1xuXG4gICAgICAgIHNlcnZpY2UudXBkYXRlKGV4cGVjdGVkKS5zdWJzY3JpYmUocmVzcCA9PiAoZXhwZWN0ZWRSZXN1bHQgPSByZXNwLmJvZHkpKTtcblxuICAgICAgICBjb25zdCByZXEgPSBodHRwTW9jay5leHBlY3RPbmUoeyBtZXRob2Q6ICdQVVQnIH0pO1xuICAgICAgICByZXEuZmx1c2gocmV0dXJuZWRGcm9tU2VydmljZSk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9NYXRjaE9iamVjdChleHBlY3RlZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBwYXJ0aWFsIHVwZGF0ZSBhIEZvcm1zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXRjaE9iamVjdCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0JCQkJCQicsXG4gICAgICAgICAgICBjeW5hcHNlSWQ6ICdCQkJCQkInLFxuICAgICAgICAgICAgZW1haWxJZDogJ0JCQkJCQicsXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogJ0JCQkJCQicsXG4gICAgICAgICAgICBjcmVhdGVkRGF0ZTogY3VycmVudERhdGUuZm9ybWF0KERBVEVfRk9STUFUKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5ldyBGb3JtcygpXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmV0dXJuZWRGcm9tU2VydmljZSA9IE9iamVjdC5hc3NpZ24ocGF0Y2hPYmplY3QsIGVsZW1EZWZhdWx0KTtcblxuICAgICAgICBjb25zdCBleHBlY3RlZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgY3JlYXRlZERhdGU6IGN1cnJlbnREYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmV0dXJuZWRGcm9tU2VydmljZVxuICAgICAgICApO1xuXG4gICAgICAgIHNlcnZpY2UucGFydGlhbFVwZGF0ZShwYXRjaE9iamVjdCkuc3Vic2NyaWJlKHJlc3AgPT4gKGV4cGVjdGVkUmVzdWx0ID0gcmVzcC5ib2R5KSk7XG5cbiAgICAgICAgY29uc3QgcmVxID0gaHR0cE1vY2suZXhwZWN0T25lKHsgbWV0aG9kOiAnUEFUQ0gnIH0pO1xuICAgICAgICByZXEuZmx1c2gocmV0dXJuZWRGcm9tU2VydmljZSk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9NYXRjaE9iamVjdChleHBlY3RlZCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSBsaXN0IG9mIEZvcm1zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXR1cm5lZEZyb21TZXJ2aWNlID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIG5hbWU6ICdCQkJCQkInLFxuICAgICAgICAgICAgY3luYXBzZUlkOiAnQkJCQkJCJyxcbiAgICAgICAgICAgIGVtYWlsSWQ6ICdCQkJCQkInLFxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6ICdCQkJCQkInLFxuICAgICAgICAgICAgY3JlYXRlZERhdGU6IGN1cnJlbnREYXRlLmZvcm1hdChEQVRFX0ZPUk1BVCksXG4gICAgICAgICAgICByZWZlcmFsQ29kZTogJ0JCQkJCQicsXG4gICAgICAgICAgICBmb3JtRG9jdW1lbnQ6ICdCQkJCQkInLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWxlbURlZmF1bHRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBleHBlY3RlZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgY3JlYXRlZERhdGU6IGN1cnJlbnREYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmV0dXJuZWRGcm9tU2VydmljZVxuICAgICAgICApO1xuXG4gICAgICAgIHNlcnZpY2UucXVlcnkoKS5zdWJzY3JpYmUocmVzcCA9PiAoZXhwZWN0ZWRSZXN1bHQgPSByZXNwLmJvZHkpKTtcblxuICAgICAgICBjb25zdCByZXEgPSBodHRwTW9jay5leHBlY3RPbmUoeyBtZXRob2Q6ICdHRVQnIH0pO1xuICAgICAgICByZXEuZmx1c2goW3JldHVybmVkRnJvbVNlcnZpY2VdKTtcbiAgICAgICAgaHR0cE1vY2sudmVyaWZ5KCk7XG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9Db250YWluRXF1YWwoZXhwZWN0ZWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgRm9ybXMnLCAoKSA9PiB7XG4gICAgICAgIHNlcnZpY2UuZGVsZXRlKDEyMykuc3Vic2NyaWJlKHJlc3AgPT4gKGV4cGVjdGVkUmVzdWx0ID0gcmVzcC5vaykpO1xuXG4gICAgICAgIGNvbnN0IHJlcSA9IGh0dHBNb2NrLmV4cGVjdE9uZSh7IG1ldGhvZDogJ0RFTEVURScgfSk7XG4gICAgICAgIHJlcS5mbHVzaCh7IHN0YXR1czogMjAwIH0pO1xuICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NyaWJlKCdhZGRGb3Jtc1RvQ29sbGVjdGlvbklmTWlzc2luZycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBhZGQgYSBGb3JtcyB0byBhbiBlbXB0eSBhcnJheScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmb3JtczogSUZvcm1zID0geyBpZDogMTIzIH07XG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZEZvcm1zVG9Db2xsZWN0aW9uSWZNaXNzaW5nKFtdLCBmb3Jtcyk7XG4gICAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0NvbnRhaW4oZm9ybXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBhZGQgYSBGb3JtcyB0byBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGl0JywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZvcm1zOiBJRm9ybXMgPSB7IGlkOiAxMjMgfTtcbiAgICAgICAgICBjb25zdCBmb3Jtc0NvbGxlY3Rpb246IElGb3Jtc1tdID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAuLi5mb3JtcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IGlkOiA0NTYgfSxcbiAgICAgICAgICBdO1xuICAgICAgICAgIGV4cGVjdGVkUmVzdWx0ID0gc2VydmljZS5hZGRGb3Jtc1RvQ29sbGVjdGlvbklmTWlzc2luZyhmb3Jtc0NvbGxlY3Rpb24sIGZvcm1zKTtcbiAgICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoXCJzaG91bGQgYWRkIGEgRm9ybXMgdG8gYW4gYXJyYXkgdGhhdCBkb2Vzbid0IGNvbnRhaW4gaXRcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZvcm1zOiBJRm9ybXMgPSB7IGlkOiAxMjMgfTtcbiAgICAgICAgICBjb25zdCBmb3Jtc0NvbGxlY3Rpb246IElGb3Jtc1tdID0gW3sgaWQ6IDQ1NiB9XTtcbiAgICAgICAgICBleHBlY3RlZFJlc3VsdCA9IHNlcnZpY2UuYWRkRm9ybXNUb0NvbGxlY3Rpb25JZk1pc3NpbmcoZm9ybXNDb2xsZWN0aW9uLCBmb3Jtcyk7XG4gICAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0NvbnRhaW4oZm9ybXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGFkZCBvbmx5IHVuaXF1ZSBGb3JtcyB0byBhbiBhcnJheScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmb3Jtc0FycmF5OiBJRm9ybXNbXSA9IFt7IGlkOiAxMjMgfSwgeyBpZDogNDU2IH0sIHsgaWQ6IDUyMzcgfV07XG4gICAgICAgICAgY29uc3QgZm9ybXNDb2xsZWN0aW9uOiBJRm9ybXNbXSA9IFt7IGlkOiAxMjMgfV07XG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZEZvcm1zVG9Db2xsZWN0aW9uSWZNaXNzaW5nKGZvcm1zQ29sbGVjdGlvbiwgLi4uZm9ybXNBcnJheSk7XG4gICAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhcmFyZ3MnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZm9ybXM6IElGb3JtcyA9IHsgaWQ6IDEyMyB9O1xuICAgICAgICAgIGNvbnN0IGZvcm1zMjogSUZvcm1zID0geyBpZDogNDU2IH07XG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZEZvcm1zVG9Db2xsZWN0aW9uSWZNaXNzaW5nKFtdLCBmb3JtcywgZm9ybXMyKTtcbiAgICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvQ29udGFpbihmb3Jtcyk7XG4gICAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b0NvbnRhaW4oZm9ybXMyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcycsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmb3JtczogSUZvcm1zID0geyBpZDogMTIzIH07XG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBzZXJ2aWNlLmFkZEZvcm1zVG9Db2xsZWN0aW9uSWZNaXNzaW5nKFtdLCBudWxsLCBmb3JtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvQ29udGFpbihmb3Jtcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgaHR0cE1vY2sudmVyaWZ5KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=
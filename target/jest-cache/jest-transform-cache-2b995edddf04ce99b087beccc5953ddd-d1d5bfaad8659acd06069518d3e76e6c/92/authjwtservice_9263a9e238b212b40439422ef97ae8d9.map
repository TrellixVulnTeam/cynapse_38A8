{"version":3,"sources":["/home/karthik/cynapseTech/src/main/webapp/app/core/auth/auth-jwt.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { LocalStorageService, SessionStorageService } from 'ngx-webstorage';\n\nimport { ApplicationConfigService } from '../config/application-config.service';\nimport { Login } from 'app/login/login.model';\n\ntype JwtToken = {\n  id_token: string;\n};\n\n@Injectable({ providedIn: 'root' })\nexport class AuthServerProvider {\n  constructor(\n    private http: HttpClient,\n    private $localStorage: LocalStorageService,\n    private $sessionStorage: SessionStorageService,\n    private applicationConfigService: ApplicationConfigService\n  ) {}\n\n  getToken(): string {\n    const tokenInLocalStorage: string | null = this.$localStorage.retrieve('authenticationToken');\n    const tokenInSessionStorage: string | null = this.$sessionStorage.retrieve('authenticationToken');\n    return tokenInLocalStorage ?? tokenInSessionStorage ?? '';\n  }\n\n  login(credentials: Login): Observable<void> {\n    return this.http\n      .post<JwtToken>(this.applicationConfigService.getEndpointFor('api/authenticate'), credentials)\n      .pipe(map(response => this.authenticateSuccess(response, credentials.rememberMe)));\n  }\n\n  logout(): Observable<void> {\n    return new Observable(observer => {\n      this.$localStorage.clear('authenticationToken');\n      this.$sessionStorage.clear('authenticationToken');\n      observer.complete();\n    });\n  }\n\n  private authenticateSuccess(response: JwtToken, rememberMe: boolean): void {\n    const jwt = response.id_token;\n    if (rememberMe) {\n      this.$localStorage.store('authenticationToken', jwt);\n      this.$sessionStorage.clear('authenticationToken');\n    } else {\n      this.$sessionStorage.store('authenticationToken', jwt);\n      this.$localStorage.clear('authenticationToken');\n    }\n  }\n}\n"]}